{"remainingRequest":"C:\\D\\Wind\\Blog\\web\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\D\\Wind\\Blog\\web\\admin\\src\\views\\article\\Article.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\D\\Wind\\Blog\\web\\admin\\src\\views\\article\\Article.vue","mtime":1676894149086},{"path":"C:\\D\\Wind\\Blog\\web\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686291304238},{"path":"C:\\D\\Wind\\Blog\\web\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1686291315932},{"path":"C:\\D\\Wind\\Blog\\web\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686291304238},{"path":"C:\\D\\Wind\\Blog\\web\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1686291309679}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGltYWdlQ29udmVyc2lvbiBmcm9tICJpbWFnZS1jb252ZXJzaW9uIjsKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCBwYXRoID0gdGhpcy4kcm91dGUucGF0aDsKICAgIGNvbnN0IGFyciA9IHBhdGguc3BsaXQoIi8iKTsKICAgIGNvbnN0IGFydGljbGVJZCA9IGFyclsyXTsKICAgIGlmIChhcnRpY2xlSWQpIHsKICAgICAgdGhpcy5heGlvcy5nZXQoIi9hcGkvYWRtaW4vYXJ0aWNsZXMvIiArIGFydGljbGVJZCkudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICB0aGlzLmFydGljbGUgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgYXJ0aWNsZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFydGljbGUiKTsKICAgICAgaWYgKGFydGljbGUpIHsKICAgICAgICB0aGlzLmFydGljbGUgPSBKU09OLnBhcnNlKGFydGljbGUpOwogICAgICB9CiAgICB9CiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICAvL+aWh+eroOiHquWKqOS/neWtmOWKn+iDvQogICAgdGhpcy5hdXRvU2F2ZUFydGljbGUoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvb2xiYXJUZXh0OiAiIiwKICAgICAgYWRkT3JFZGl0OiBmYWxzZSwKICAgICAgYXV0b1NhdmU6IHRydWUsCiAgICAgIGNhdGVnb3J5TmFtZTogIiIsCiAgICAgIHRhZ05hbWU6ICIiLAogICAgICBjYXRlZ29yeUxpc3Q6IFtdLAogICAgICB0YWdMaXN0OiBbXSwKICAgICAgdHlwZUxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAxLAogICAgICAgICAgZGVzYzogIuWOn+WImyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAyLAogICAgICAgICAgZGVzYzogIui9rOi9vSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAzLAogICAgICAgICAgZGVzYzogIue/u+ivkSIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgYXJ0aWNsZTogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGFydGljbGVUaXRsZTogdGhpcy4kbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgiWVlZWS1NTS1ERCIpLAogICAgICAgIGFydGljbGVDb250ZW50OiAiIiwKICAgICAgICBhcnRpY2xlQ292ZXI6ICIiLAogICAgICAgIGNhdGVnb3J5TmFtZTogbnVsbCwKICAgICAgICB0YWdOYW1lTGlzdDogW10sCiAgICAgICAgb3JpZ2luYWxVcmw6ICIiLAogICAgICAgIGlzVG9wOiAwLAogICAgICAgIHR5cGU6IDEsCiAgICAgICAgc3RhdHVzOiAxLAogICAgICB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEVkaXRvckhlaWdodCgpIHsKCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm1haW4tY2FyZCIpCiAgICB9LAogICAgbGlzdENhdGVnb3JpZXMoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYXBpL2FkbWluL2NhdGVnb3JpZXMvc2VhcmNoIikudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IGRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgbGlzdFRhZ3MoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYXBpL2FkbWluL3RhZ3Mvc2VhcmNoIikudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICB0aGlzLnRhZ0xpc3QgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIG9wZW5Nb2RlbCgpIHsKICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlVGl0bGUudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5qCH6aKY5LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFydGljbGUuYXJ0aWNsZUNvbnRlbnQudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5YaF5a655LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMubGlzdENhdGVnb3JpZXMoKTsKICAgICAgdGhpcy5saXN0VGFncygpOwogICAgICB0aGlzLmFkZE9yRWRpdCA9IHRydWU7CiAgICB9LAogICAgdXBsb2FkQ292ZXIocmVzcG9uc2UpIHsKICAgICAgdGhpcy5hcnRpY2xlLmFydGljbGVDb3ZlciA9IHJlc3BvbnNlLmRhdGE7CiAgICB9LAogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgaWYgKGZpbGUuc2l6ZSAvIDEwMjQgPCB0aGlzLmNvbmZpZy5VUExPQURfU0laRSkgewogICAgICAgICAgcmVzb2x2ZShmaWxlKTsKICAgICAgICB9CiAgICAgICAgLy8g5Y6L57yp5YiwMjAwS0Is6L+Z6YeM55qEMjAw5bCx5piv6KaB5Y6L57yp55qE5aSn5bCPLOWPr+iHquWumuS5iQogICAgICAgIGltYWdlQ29udmVyc2lvbgogICAgICAgICAgLmNvbXByZXNzQWNjdXJhdGVseShmaWxlLCB0aGlzLmNvbmZpZy5VUExPQURfU0laRSkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwbG9hZEltZyhldmVudCwgaW5zZXJ0SW1hZ2UsIGZpbGVzKSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGVzKQogICAgICBsZXQgZmlsZSA9IGZpbGVzWzBdCiAgICAgIHZhciBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBpZiAoZmlsZS5zaXplIC8gMTAyNCA8IHRoaXMuY29uZmlnLlVQTE9BRF9TSVpFKSB7CiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCJmaWxlIiwgZmlsZSk7CiAgICAgICAgdGhpcy5heGlvcwogICAgICAgICAgLnBvc3QoIi9hcGkvYWRtaW4vYXJ0aWNsZXMvaW1hZ2VzIiwgZm9ybWRhdGEpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAvLyDmraTlpITlj6rlgZrnpLrkvosKICAgICAgICAgICAgaW5zZXJ0SW1hZ2UoewogICAgICAgICAgICAgIHVybDogcmVzLmRhdGEuZGF0YSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vdGhpcy4kcmVmcy5tZC4kaW1nMlVybChwb3MsIHJlcy5kYXRhLmRhdGEpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5Y6L57yp5YiwMjAwS0Is6L+Z6YeM55qEMjAw5bCx5piv6KaB5Y6L57yp55qE5aSn5bCPLOWPr+iHquWumuS5iQogICAgICAgIGltYWdlQ29udmVyc2lvbgogICAgICAgICAgLmNvbXByZXNzQWNjdXJhdGVseShmaWxlLCB0aGlzLmNvbmZpZy5VUExPQURfU0laRSkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgZm9ybWRhdGEuYXBwZW5kKAogICAgICAgICAgICAgICJmaWxlIiwKICAgICAgICAgICAgICBuZXcgd2luZG93LkZpbGUoW3Jlc10sIGZpbGUubmFtZSwgeyB0eXBlOiBmaWxlLnR5cGUgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5heGlvcwogICAgICAgICAgICAgIC5wb3N0KCIvYXBpL2FkbWluL2FydGljbGVzL2ltYWdlcyIsIGZvcm1kYXRhKQogICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpbnNlcnRJbWFnZSh7CiAgICAgICAgICAgICAgICAgIHVybDogcmVzLmRhdGEuZGF0YSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlQXJ0aWNsZURyYWZ0KCkgewogICAgICBpZiAodGhpcy5hcnRpY2xlLmFydGljbGVUaXRsZS50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DmoIfpopjkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlQ29udGVudC50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DlhoXlrrnkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5hcnRpY2xlLnN0YXR1cyA9IDM7CiAgICAgIHRoaXMuYXhpb3MucG9zdCgiL2FwaS9hZG1pbi9hcnRpY2xlcyIsIHRoaXMuYXJ0aWNsZSkudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICBpZiAoZGF0YS5mbGFnKSB7CiAgICAgICAgICBpZiAodGhpcy5hcnRpY2xlLmlkID09PSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlVGFiIiwgIuWPkeW4g+aWh+eroCIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJyZW1vdmVUYWIiLCAi5L+u5pS55paH56ugIik7CiAgICAgICAgICB9CiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCJhcnRpY2xlIik7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvYXJ0aWNsZS1saXN0IiB9KTsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICLmiJDlip8iLAogICAgICAgICAgICBtZXNzYWdlOiAi5L+d5a2Y6I2J56i/5oiQ5YqfIiwKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLkv53lrZjojYnnqL/lpLHotKUiLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8v5YWz6Zet6Ieq5Yqo5L+d5a2Y5Yqf6IO9CiAgICAgIHRoaXMuYXV0b1NhdmUgPSBmYWxzZTsKICAgIH0sCiAgICBzYXZlT3JVcGRhdGVBcnRpY2xlKCkgewogICAgICBpZiAodGhpcy5hcnRpY2xlLmFydGljbGVUaXRsZS50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DmoIfpopjkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlQ29udGVudC50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DlhoXlrrnkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5jYXRlZ29yeU5hbWUgPT0gbnVsbCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWh+eroOWIhuexu+S4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5qCH562+5LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFydGljbGUuYXJ0aWNsZUNvdmVyLnRyaW0oKSA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWh+eroOWwgemdouS4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmFydGljbGUpOwogICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvYWRtaW4vYXJ0aWNsZXMiLCB0aGlzLmFydGljbGUpLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgaWYgKGRhdGEuZmxhZykgewogICAgICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5pZCA9PT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInJlbW92ZVRhYiIsICLlj5HluIPmlofnq6AiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlVGFiIiwgIuS/ruaUueaWh+eroCIpOwogICAgICAgICAgfQogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgiYXJ0aWNsZSIpOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAiL2FydGljbGUtbGlzdCIgfSk7CiAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgIHRpdGxlOiAi5oiQ5YqfIiwKICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICLlpLHotKUiLAogICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLmFkZE9yRWRpdCA9IGZhbHNlOwogICAgICB9KTsKICAgICAgLy/lhbPpl63oh6rliqjkv53lrZjlip/og70KICAgICAgdGhpcy5hdXRvU2F2ZSA9IGZhbHNlOwogICAgfSwKICAgIGF1dG9TYXZlQXJ0aWNsZSgpIHsKICAgICAgLy8g6Ieq5Yqo5LiK5Lyg5paH56ugCiAgICAgIGlmICgKICAgICAgICB0aGlzLmF1dG9TYXZlICYmCiAgICAgICAgdGhpcy5hcnRpY2xlLmFydGljbGVUaXRsZS50cmltKCkgIT0gIiIgJiYKICAgICAgICB0aGlzLmFydGljbGUuYXJ0aWNsZUNvbnRlbnQudHJpbSgpICE9ICIiICYmCiAgICAgICAgdGhpcy5hcnRpY2xlLmlkICE9IG51bGwKICAgICAgKSB7CiAgICAgICAgdGhpcy5heGlvcwogICAgICAgICAgLnBvc3QoIi9hcGkvYWRtaW4vYXJ0aWNsZXMiLCB0aGlzLmFydGljbGUpCiAgICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgICAgaWYgKGRhdGEuZmxhZykgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAi5oiQ5YqfIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLoh6rliqjkv53lrZjmiJDlip8iLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6Ieq5Yqo5L+d5a2Y5aSx6LSlIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8g5L+d5a2Y5pys5Zyw5paH56ug6K6w5b2VCiAgICAgIGlmICh0aGlzLmF1dG9TYXZlICYmIHRoaXMuYXJ0aWNsZS5pZCA9PSBudWxsKSB7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXJ0aWNsZSIsIEpTT04uc3RyaW5naWZ5KHRoaXMuYXJ0aWNsZSkpOwogICAgICB9CiAgICB9LAogICAgc2VhcmNoQ2F0ZWdvcmllcyhrZXl3b3JkcywgY2IpIHsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5nZXQoIi9hcGkvYWRtaW4vY2F0ZWdvcmllcy9zZWFyY2giLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAga2V5d29yZHM6IGtleXdvcmRzLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgY2IoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3RDYXRlZ29yaWVzKGl0ZW0pIHsKICAgICAgdGhpcy5hZGRDYXRlZ29yeSh7CiAgICAgICAgY2F0ZWdvcnlOYW1lOiBpdGVtLmNhdGVnb3J5TmFtZSwKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZUNhdGVnb3J5KCkgewogICAgICBpZiAodGhpcy5jYXRlZ29yeU5hbWUudHJpbSgpICE9ICIiKSB7CiAgICAgICAgdGhpcy5hZGRDYXRlZ29yeSh7CiAgICAgICAgICBjYXRlZ29yeU5hbWU6IHRoaXMuY2F0ZWdvcnlOYW1lLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2F0ZWdvcnlOYW1lID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBhZGRDYXRlZ29yeShpdGVtKSB7CiAgICAgIHRoaXMuYXJ0aWNsZS5jYXRlZ29yeU5hbWUgPSBpdGVtLmNhdGVnb3J5TmFtZTsKICAgIH0sCiAgICByZW1vdmVDYXRlZ29yeSgpIHsKICAgICAgdGhpcy5hcnRpY2xlLmNhdGVnb3J5TmFtZSA9IG51bGw7CiAgICB9LAogICAgc2VhcmNoVGFncyhrZXl3b3JkcywgY2IpIHsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5nZXQoIi9hcGkvYWRtaW4vdGFncy9zZWFyY2giLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAga2V5d29yZHM6IGtleXdvcmRzLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgY2IoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3RUYWcoaXRlbSkgewogICAgICB0aGlzLmFkZFRhZyh7CiAgICAgICAgdGFnTmFtZTogaXRlbS50YWdOYW1lLAogICAgICB9KTsKICAgIH0sCiAgICBzYXZlVGFnKCkgewogICAgICBpZiAodGhpcy50YWdOYW1lLnRyaW0oKSAhPSAiIikgewogICAgICAgIHRoaXMuYWRkVGFnKHsKICAgICAgICAgIHRhZ05hbWU6IHRoaXMudGFnTmFtZSwKICAgICAgICB9KTsKICAgICAgICB0aGlzLnRhZ05hbWUgPSAiIjsKICAgICAgfQogICAgfSwKICAgIGFkZFRhZyhpdGVtKSB7CiAgICAgIGlmICh0aGlzLmFydGljbGUudGFnTmFtZUxpc3QuaW5kZXhPZihpdGVtLnRhZ05hbWUpID09IC0xKSB7CiAgICAgICAgdGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0LnB1c2goaXRlbS50YWdOYW1lKTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZVRhZyhpdGVtKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0LmluZGV4T2YoaXRlbSk7CiAgICAgIHRoaXMuYXJ0aWNsZS50YWdOYW1lTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0YWdDbGFzcygpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmFydGljbGUudGFnTmFtZUxpc3QuaW5kZXhPZihpdGVtLnRhZ05hbWUpOwogICAgICAgIHJldHVybiBpbmRleCAhPSAtMSA/ICJ0YWctaXRlbS1zZWxlY3QiIDogInRhZy1pdGVtIjsKICAgICAgfTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Article.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Article.vue","sourceRoot":"src/views/article","sourcesContent":["<template>\n  <el-card class=\"main-card\">\n    <div class=\"title\">{{ this.$route.name }}</div>\n    <!-- 文章标题 -->\n    <div class=\"article-title-container\">\n      <el-input v-model=\"article.articleTitle\" size=\"medium\" placeholder=\"输入文章标题\" />\n      <el-button type=\"danger\" size=\"medium\" class=\"save-btn\" @click=\"saveArticleDraft\"\n        v-if=\"article.id == null || article.status == 3\">\n        保存草稿\n      </el-button>\n      <el-button type=\"danger\" size=\"medium\" @click=\"openModel\" style=\"margin-left:10px\">\n        发布文章\n      </el-button>\n    </div>\n    <!-- 文章内容 -->\n    <v-md-editor v-model=\"article.articleContent\" class=\"ed\" :disabled-menus=\"[]\"\n      @upload-image=\"uploadImg\">\n    </v-md-editor>\n\n    <!-- <mavon-editor ref=\"md\" v-model=\"article.articleContent\" @imgAdd=\"uploadImg\" style=\"height:calc(100vh - 260px)\" navigation/> -->\n    <!-- 添加文章对话框 -->\n    <el-dialog :visible.sync=\"addOrEdit\" width=\"40%\" top=\"3vh\">\n      <div class=\"dialog-title-container\" slot=\"title\">\n        发布文章\n      </div>\n      <!-- 文章数据 -->\n      <el-form label-width=\"80px\" size=\"medium\" :model=\"article\">\n        <!-- 文章分类 -->\n        <el-form-item label=\"文章分类\">\n          <el-tag type=\"success\" v-show=\"article.categoryName\" style=\"margin:0 1rem 0 0\" :closable=\"true\"\n            @close=\"removeCategory\">\n            {{ article.categoryName }}\n          </el-tag>\n          <!-- 分类选项 -->\n          <el-popover placement=\"bottom-start\" width=\"460\" trigger=\"click\" v-if=\"!article.categoryName\">\n            <div class=\"popover-title\">分类</div>\n            <!-- 搜索框 -->\n            <el-autocomplete style=\"width:100%\" v-model=\"categoryName\" :fetch-suggestions=\"searchCategories\"\n              placeholder=\"请输入分类名搜索，enter可添加自定义分类\" :trigger-on-focus=\"false\" @keyup.enter.native=\"saveCategory\"\n              @select=\"handleSelectCategories\">\n              <template slot-scope=\"{ item }\">\n                <div>{{ item.categoryName }}</div>\n              </template>\n            </el-autocomplete>\n            <!-- 分类 -->\n            <div class=\"popover-container\">\n              <div v-for=\"item of categoryList\" :key=\"item.id\" class=\"category-item\" @click=\"addCategory(item)\">\n                {{ item.categoryName }}\n              </div>\n            </div>\n            <el-button type=\"success\" plain slot=\"reference\" size=\"small\">\n              添加分类\n            </el-button>\n          </el-popover>\n        </el-form-item>\n        <!-- 文章标签 -->\n        <el-form-item label=\"文章标签\">\n          <el-tag v-for=\"(item, index) of article.tagNameList\" :key=\"index\" style=\"margin:0 1rem 0 0\" :closable=\"true\"\n            @close=\"removeTag(item)\">\n            {{ item }}\n          </el-tag>\n          <!-- 标签选项 -->\n          <el-popover placement=\"bottom-start\" width=\"460\" trigger=\"click\" v-if=\"article.tagNameList.length < 3\">\n            <div class=\"popover-title\">标签</div>\n            <!-- 搜索框 -->\n            <el-autocomplete style=\"width:100%\" v-model=\"tagName\" :fetch-suggestions=\"searchTags\"\n              placeholder=\"请输入标签名搜索，enter可添加自定义标签\" :trigger-on-focus=\"false\" @keyup.enter.native=\"saveTag\"\n              @select=\"handleSelectTag\">\n              <template slot-scope=\"{ item }\">\n                <div>{{ item.tagName }}</div>\n              </template>\n            </el-autocomplete>\n            <!-- 标签 -->\n            <div class=\"popover-container\">\n              <div style=\"margin-bottom:1rem\">添加标签</div>\n              <el-tag v-for=\"(item, index) of tagList\" :key=\"index\" :class=\"tagClass(item)\" @click=\"addTag(item)\">\n                {{ item.tagName }}\n              </el-tag>\n            </div>\n            <el-button type=\"primary\" plain slot=\"reference\" size=\"small\">\n              添加标签\n            </el-button>\n          </el-popover>\n        </el-form-item>\n        <el-form-item label=\"文章类型\">\n          <el-select v-model=\"article.type\" placeholder=\"请选择类型\">\n            <el-option v-for=\"item in typeList\" :key=\"item.type\" :label=\"item.desc\" :value=\"item.type\" />\n          </el-select>\n        </el-form-item>\n        <!-- 文章类型 -->\n        <el-form-item label=\"原文地址\" v-if=\"article.type != 1\">\n          <el-input v-model=\"article.originalUrl\" placeholder=\"请填写原文链接\" />\n        </el-form-item>\n        <el-form-item label=\"上传封面\">\n          <el-upload class=\"upload-cover\" multiple :before-upload=\"beforeUpload\" :on-success=\"uploadCover\" drag\n            action=\"/api/admin/articles/images\">\n            <i class=\"el-icon-upload\" v-if=\"article.articleCover == ''\" />\n            <div class=\"el-upload__text\" v-if=\"article.articleCover == ''\">\n              将文件拖到此处，或<em>点击上传</em>\n            </div>\n            <img v-else :src=\"article.articleCover\" width=\"360px\" height=\"180px\" />\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"置顶\">\n          <el-switch v-model=\"article.isTop\" active-color=\"#13ce66\" inactive-color=\"#F4F4F5\" :active-value=\"1\"\n            :inactive-value=\"0\" />\n        </el-form-item>\n        <el-form-item label=\"发布形式\">\n          <el-radio-group v-model=\"article.status\">\n            <el-radio :label=\"1\">公开</el-radio>\n            <el-radio :label=\"2\">私密</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"addOrEdit = false\">取 消</el-button>\n        <el-button type=\"danger\" @click=\"saveOrUpdateArticle\">\n          发 表\n        </el-button>\n      </div>\n    </el-dialog>\n  </el-card>\n</template>\n\n<script>\nimport * as imageConversion from \"image-conversion\";\nexport default {\n  created() {\n    const path = this.$route.path;\n    const arr = path.split(\"/\");\n    const articleId = arr[2];\n    if (articleId) {\n      this.axios.get(\"/api/admin/articles/\" + articleId).then(({ data }) => {\n        this.article = data.data;\n      });\n    } else {\n      const article = sessionStorage.getItem(\"article\");\n      if (article) {\n        this.article = JSON.parse(article);\n      }\n    }\n  },\n  destroyed() {\n    //文章自动保存功能\n    this.autoSaveArticle();\n  },\n  data: function () {\n    return {\n      toolbarText: \"\",\n      addOrEdit: false,\n      autoSave: true,\n      categoryName: \"\",\n      tagName: \"\",\n      categoryList: [],\n      tagList: [],\n      typeList: [\n        {\n          type: 1,\n          desc: \"原创\",\n        },\n        {\n          type: 2,\n          desc: \"转载\",\n        },\n        {\n          type: 3,\n          desc: \"翻译\",\n        },\n      ],\n      article: {\n        id: null,\n        articleTitle: this.$moment(new Date()).format(\"YYYY-MM-DD\"),\n        articleContent: \"\",\n        articleCover: \"\",\n        categoryName: null,\n        tagNameList: [],\n        originalUrl: \"\",\n        isTop: 0,\n        type: 1,\n        status: 1,\n      },\n    };\n  },\n  methods: {\n    getEditorHeight() {\n\n      document.getElementsByClassName(\"main-card\")\n    },\n    listCategories() {\n      this.axios.get(\"/api/admin/categories/search\").then(({ data }) => {\n        this.categoryList = data.data;\n      });\n    },\n    listTags() {\n      this.axios.get(\"/api/admin/tags/search\").then(({ data }) => {\n        this.tagList = data.data;\n      });\n    },\n    openModel() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      this.listCategories();\n      this.listTags();\n      this.addOrEdit = true;\n    },\n    uploadCover(response) {\n      this.article.articleCover = response.data;\n    },\n    beforeUpload(file) {\n      return new Promise((resolve) => {\n        if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n          resolve(file);\n        }\n        // 压缩到200KB,这里的200就是要压缩的大小,可自定义\n        imageConversion\n          .compressAccurately(file, this.config.UPLOAD_SIZE)\n          .then((res) => {\n            resolve(res);\n          });\n      });\n    },\n    uploadImg(event, insertImage, files) {\n      console.log(files)\n      let file = files[0]\n      var formdata = new FormData();\n      if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n        formdata.append(\"file\", file);\n        this.axios\n          .post(\"/api/admin/articles/images\", formdata)\n          .then(res => {\n            // 此处只做示例\n            insertImage({\n              url: res.data.data,\n            });\n            //this.$refs.md.$img2Url(pos, res.data.data);\n          });\n      } else {\n        // 压缩到200KB,这里的200就是要压缩的大小,可自定义\n        imageConversion\n          .compressAccurately(file, this.config.UPLOAD_SIZE)\n          .then((res) => {\n            formdata.append(\n              \"file\",\n              new window.File([res], file.name, { type: file.type })\n            );\n            this.axios\n              .post(\"/api/admin/articles/images\", formdata)\n              .then(res => {\n                insertImage({\n                  url: res.data.data,\n                });\n              });\n          });\n      }\n    },\n    saveArticleDraft() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      this.article.status = 3;\n      this.axios.post(\"/api/admin/articles\", this.article).then(({ data }) => {\n        if (data.flag) {\n          if (this.article.id === null) {\n            this.$store.commit(\"removeTab\", \"发布文章\");\n          } else {\n            this.$store.commit(\"removeTab\", \"修改文章\");\n          }\n          sessionStorage.removeItem(\"article\");\n          this.$router.push({ path: \"/article-list\" });\n          this.$notify.success({\n            title: \"成功\",\n            message: \"保存草稿成功\",\n          });\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: \"保存草稿失败\",\n          });\n        }\n      });\n\n      //关闭自动保存功能\n      this.autoSave = false;\n    },\n    saveOrUpdateArticle() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      if (this.article.categoryName == null) {\n        this.$message.error(\"文章分类不能为空\");\n        return false;\n      }\n      if (this.article.tagNameList.length == 0) {\n        this.$message.error(\"文章标签不能为空\");\n        return false;\n      }\n      if (this.article.articleCover.trim() == \"\") {\n        this.$message.error(\"文章封面不能为空\");\n        return false;\n      }\n      // console.log(this.article);\n      this.axios.post(\"/api/admin/articles\", this.article).then(({ data }) => {\n        if (data.flag) {\n          if (this.article.id === null) {\n            this.$store.commit(\"removeTab\", \"发布文章\");\n          } else {\n            this.$store.commit(\"removeTab\", \"修改文章\");\n          }\n          sessionStorage.removeItem(\"article\");\n          this.$router.push({ path: \"/article-list\" });\n          this.$notify.success({\n            title: \"成功\",\n            message: data.message\n          });\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: data.message\n          });\n        }\n        this.addOrEdit = false;\n      });\n      //关闭自动保存功能\n      this.autoSave = false;\n    },\n    autoSaveArticle() {\n      // 自动上传文章\n      if (\n        this.autoSave &&\n        this.article.articleTitle.trim() != \"\" &&\n        this.article.articleContent.trim() != \"\" &&\n        this.article.id != null\n      ) {\n        this.axios\n          .post(\"/api/admin/articles\", this.article)\n          .then(({ data }) => {\n            if (data.flag) {\n              this.$notify.success({\n                title: \"成功\",\n                message: \"自动保存成功\",\n              });\n            } else {\n              this.$notify.error({\n                title: \"失败\",\n                message: \"自动保存失败\",\n              });\n            }\n          });\n      }\n      // 保存本地文章记录\n      if (this.autoSave && this.article.id == null) {\n        sessionStorage.setItem(\"article\", JSON.stringify(this.article));\n      }\n    },\n    searchCategories(keywords, cb) {\n      this.axios\n        .get(\"/api/admin/categories/search\", {\n          params: {\n            keywords: keywords,\n          },\n        })\n        .then(({ data }) => {\n          cb(data.data);\n        });\n    },\n    handleSelectCategories(item) {\n      this.addCategory({\n        categoryName: item.categoryName,\n      });\n    },\n    saveCategory() {\n      if (this.categoryName.trim() != \"\") {\n        this.addCategory({\n          categoryName: this.categoryName,\n        });\n        this.categoryName = \"\";\n      }\n    },\n    addCategory(item) {\n      this.article.categoryName = item.categoryName;\n    },\n    removeCategory() {\n      this.article.categoryName = null;\n    },\n    searchTags(keywords, cb) {\n      this.axios\n        .get(\"/api/admin/tags/search\", {\n          params: {\n            keywords: keywords,\n          },\n        })\n        .then(({ data }) => {\n          cb(data.data);\n        });\n    },\n    handleSelectTag(item) {\n      this.addTag({\n        tagName: item.tagName,\n      });\n    },\n    saveTag() {\n      if (this.tagName.trim() != \"\") {\n        this.addTag({\n          tagName: this.tagName,\n        });\n        this.tagName = \"\";\n      }\n    },\n    addTag(item) {\n      if (this.article.tagNameList.indexOf(item.tagName) == -1) {\n        this.article.tagNameList.push(item.tagName);\n      }\n    },\n    removeTag(item) {\n      const index = this.article.tagNameList.indexOf(item);\n      this.article.tagNameList.splice(index, 1);\n    },\n  },\n  computed: {\n    tagClass() {\n      return function (item) {\n        const index = this.article.tagNameList.indexOf(item.tagName);\n        return index != -1 ? \"tag-item-select\" : \"tag-item\";\n      };\n    },\n  },\n};\n</script>\n\n<style scoped>\n.ed {\n  height: calc(100vh - 260px);\n}\n\n.article-title-container {\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.25rem;\n  margin-top: 2.25rem;\n}\n\n.save-btn {\n  margin-left: 0.75rem;\n  background: #fff;\n  color: #f56c6c;\n}\n\n.tag-item {\n  margin-right: 1rem;\n  margin-bottom: 1rem;\n  cursor: pointer;\n}\n\n.tag-item-select {\n  margin-right: 1rem;\n  margin-bottom: 1rem;\n  cursor: not-allowed;\n  color: #ccccd8 !important;\n}\n\n.category-item {\n  cursor: pointer;\n  padding: 0.6rem 0.5rem;\n}\n\n.category-item:hover {\n  background-color: #f0f9eb;\n  color: #67c23a;\n}\n\n.popover-title {\n  margin-bottom: 1rem;\n  text-align: center;\n}\n\n.popover-container {\n  margin-top: 1rem;\n  height: 260px;\n  overflow-y: auto;\n}\n</style>\n"]}]}